{% extends "base/base.html" %}
{% load static %}
{% block content %}

<style>
    /* Center the form horizontally and vertically */
    .form-container {
        display: flex;
        justify-content: center;
        align-items: center;
    }

    /* Style for the form box */
    .form-box {
        border: 1px solid #ccc;
        padding: 20px;
        width: 450px; /* Adjust width as needed */
        background-color: #f9f9f9;
    }

    /* Style for form sections */
    .form-section {
        margin-bottom: 20px;
    }

    ul {
        list-style-type: none; /* Set list-style-type to none */
        padding-left: 0; /* Optional: remove default padding */
    }

    /* Optional: Add some margin between list items */
    li {
        margin-bottom: 5px;
    }
</style>

<div class="form-container">
    <div class="form-box">
        <h2>checkout</h2>
        <hr>
        <form method="POST" action="{% url 'core:order_placed' %}" class="checkout-form">
            {% csrf_token %}
            <div class="form-section">
                <h3>Total Cart Price: ${{ total_cart_price }}</h3>
                <hr>
                <ul>
                    {% for cart_item in cart_items %}
                        <li>{{ cart_item.product.title }} - Quantity: {{ cart_item.quantity }}</li>
                    {% endfor %}
                </ul>
                <hr>
            </div>
            <div class="form-section">
                {{ address_form.as_p }}
                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addAddressModal">Add New Address</button>
            </div>
            <div class="form-section">
                {{ payment_form.as_p }}
            </div>
            <div class="form-section">
                <button type="submit" class='btn btn-primary'>Place Order</button>
            </div>
        </form>
        
 <!-- Add Address Modal -->
 <div class="modal fade" id="addAddressModal" tabindex="-1" role="dialog" aria-labelledby="addAddressModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addAddressModalLabel">Add New Address</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form method="POST">
                    {% csrf_token %}
                    <div class="form-group">
                        <label for="street_address">Street Address</label>
                        <input type="text" class="form-control" id="street_address" name="street_address" required>
                    </div>
                    <div class="form-group">
                        <label for="city">City</label>
                        <input type="text" class="form-control" id="city" name="city" required>
                    </div>
                    <div class="form-group">
                        <label for="state">State</label>
                        <input type="text" class="form-control" id="state" name="state" required>
                    </div>
                    <div class="form-group">
                        <label for="postal_code">Postal Code</label>
                        <input type="text" class="form-control" id="postal_code" name="postal_code" required>
                    </div>
                    <div class="form-group">
                        <label for="country">Country</label>
                        <input type="text" class="form-control" id="country" name="country" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Save Address</button>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- End Add Address Modal -->

        
    </div>
</div>


{% endblock %}
